

@{
    ViewData["Title"] = "Đơn hàng";
}
@section Styles{
    <link href="~/lib/jQuery-EasyUI/themes/bootstrap/easyui.css" rel="stylesheet" />
    <link href="~/lib/jQuery-EasyUI/themes/icon.css" rel="stylesheet" />
}
@section Scripts{
    <script src="~/lib/jQuery-EasyUI/jquery.easyui.min.js"></script>
    <script src="~/app/controllers/salesorder/index.js"></script>
    <script src="~/app/controllers/salesorder/addcustomer.js"></script>
    <script>
        var salesorder = new salesorderController();
        salesorder.initialize();
        var addressBook = new addressBookController();
        addressBook.initialize();
    </script>
}
<div>
    <div class="collapse navbar-collapse">
        <div class="title_left">
            <div class="col-md-5 col-sm-8 col-xs-12 form-group pull-left autocomplete">
                <input type="text" id="txtKeyword" class="form-control" placeholder="Tìm mặt hàng...">
                <div class="autocomplete-items" id="contain-listproduct">

                </div>
            </div>
        </div>
        <ul class="nav nav-tabs">
            <li class="active"><a data-toggle="tab" href="#home">Hóa đơn 1 <span class="btn-close"><i class="fa fa-close red" id="btn-close" style="font-size:16px"></i></span></a></li>
            @*<li><a data-toggle="tab" href="#menu1">Hóa đơn 2</a></li>
                <li><a data-toggle="tab" href="#menu2">Hóa đơn 3</a></li>
                <li><a data-toggle="tab" href="#menu3">Hóa đơn 4</a></li>*@
        </ul>
    </div>
    <div class="tab-content">
        <div id="home" class="row content wrap-content tab-pane fade in active">
            <div class="col-sm-9 bg-white contain-left">
                <div class="product-cart-list col-sm-12">

                </div>
            </div>
            <div class="col-sm-3 contain-right">
                <form role="form" id="frmMaintainance">
                    <div class="form-group row" style="margin-top:10px;">
                        <label for="txtId" class="col-sm-4 col-form-label">Mã ĐH</label>
                        <div class="col-sm-6">
                            <input type="text" class="form-control" id="txtId" name="txtId" />
                        </div>

                    </div>
                    <div class="form-group row">
                        <label for="dtDateCreated" class="col-sm-4 col-form-label">Ngày tạo</label>
                        <div class="col-sm-8">
                            <input type="text" class="form-control input-border" id="dtDateCreated" name="dtDateCreated">
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-sm-12">
                            <div class="input-group">
                                <input type="text" id="txtCustomerName" class="form-control" name="txtCustomerName" placeholder="Nhập tên khách hàng" data-keyidcus />
                                <span class="input-group-btn btn-add"><img src="~/images/plusIcon.png" style="width:20px; height:auto" /></span>
                            </div>
                            <div class="autocomplete-items" id="contain-listcustomer">

                            </div>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-sm-6">
                            <div class="checkbox">
                                <label><input type="checkbox" value="" id="chkShip"></label><a class="position-ship">Giao hàng</a>
                            </div>
                        </div>
                        <div class="col-sm-6 calculator">
                            <img src="~/images/calculator.png" style="width:30px" id="calculator" />
                        </div>
                    </div>

                    @*<div class="form-group row">
                            <label for="selPaymentTerm" class="col-sm-12 col-form-label">Điều kiện thanh toán<span class="star">*</span></label>
                            <div class="col-sm-12">
                                <select id="selPaymentTerm" class="form-control" name="selPaymentTerm"></select>
                            </div>
                        </div>*@
                    <div class="form-group row">
                        <label for="txtTotal" class="col-sm-4 col-form-label">Tổng tiền hàng</label>
                        <div class="col-sm-8" id="Total" name="Total">
                            <input type="text" class="form-control input-border" id="txtTotal" name="txtTotal">
                        </div>
                    </div>
                    @*<div class="form-group row">
                            <label for="txtTax" class="col-sm-4 col-form-label">Thuế</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="txtTax" name="txtTax">
                            </div>
                        </div>*@
                    <div class="form-group row">
                        <label for="txtDiscountAmt" class="col-sm-4 col-form-label">Chiết khấu</label>
                        <div class="col-sm-8">
                            <input type="button" class="form-control border" id="txtDiscountAmt" name="txtDiscountAmt">
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="txtFreight" class="col-sm-4 col-form-label">Phí VC</label>
                        <div class="col-sm-8">
                            <input type="text" class="form-control input-border" id="txtFreight" name="txtFreight">
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="txtFinalTotal" class="col-sm-4 col-form-label">Thành tiền</label>
                        <div class="col-sm-8">
                            <input type="text" class="form-control input-border" id="txtFinalTotal" name="txtFinalTotal">
                        </div>
                    </div>
                    <div class="form-group row" id="CustomerPay">
                        <label for="txtCustomerPay" class="col-sm-4 col-form-label">Tiền khách đưa</label>
                        <div class="col-sm-8">
                            <input type="text" class="form-control input-border" id="txtCustomerPay" name="txtCustomerPay">
                        </div>
                    </div>
                    <div class="form-group row" id="Return">
                        <label for="txtReturn" class="col-sm-4 col-form-label">Tiền thừa</label>
                        <div class="col-sm-8">
                            <input type="text" class="form-control input-border" id="txtReturn" name="txtReturn">
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-sm-12">
                            <input type="text" id="txtNote" class="form-control" name="txtNote" placeholder="Ghi chú" />
                        </div>
                    </div>
                    <div class="checkbox">
                        <label><input type="checkbox" value="" id="chkDirection">Thanh toán trực tiếp</label>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-12">
                            <button type="button" id="btnSave" class="btn btn-success btn-block">Thanh toán</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>

    </div>
</div>

<script id="table-template" type="x-tmpl-mustache">
    <div data-id="{{KeyId}}" id="ddlrow">
        <img src="{{{Image}}}" style="width:50px" />
        <span>{{ProductName}}</span>
        <span>{{ProductRef}}</span>
        <span>Giá:{{UnitPrice}}</span>
        <span>Tồn:{{Qty_In_Stock}}</span>
        <span>Đặt:{{Qty_Allocated}}</span>
    </div>
</script>
<script id="product-template" type="x-tmpl-mustache">
    <div class="row-product" data-id3="{{KeyId}}">
        <div class="stt" style="width:5%">{{Id}}</div>
        <div>{{ProductRef}}</div>
        <div class="text">{{ProductName}}</div>
        <div class="unitFK">{{{UnitFK}}}</div>
        <div class="contain-qty">
            <input type="number" value="{{Qty}}" class="border" id="qty" style="width:80%" />
        </div>
        <div class="warning"></div>
        <div class="contain-price" style="text-align:right" data-price="{{UnitPrice}}">
            <input type="button" value="{{UnitPrice}}" class="border" id="unitPrice" /><br />
            <span class="discount"></span>
        </div>
        <div id="subtotal">{{SubTotal}}</div>
        <div class="contain-btn">
            <a class="btn  btn-sm btn-delete" data-id1="{{KeyId}}"><i class="fa fa-close red" style="font-size:16px"></i></a>
        </div>
    </div>
</script>
<script id="customer-template" type="x-tmpl-mustache">
    <div data-idcustomer="{{KeyId}}" id="ddlcustomer">
        <span id="fullname">{{FullName}}</span>
        <span>{{Id}}</span>
    </div>
</script>
@await Html.PartialAsync("_AddCustomer.cshtml")
@await Html.PartialAsync("_Shipping.cshtml")
@await Html.PartialAsync("_Calculating.cshtml")
@await Html.PartialAsync("_Discount.cshtml")
@await Html.PartialAsync("_YesNoModal.cshtml")
